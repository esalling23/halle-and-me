{{!< default}}
{{!-- 
/**
 * Uncertainty Project
 * Developed by Engagement Lab, 2016
 * ==============
 * 
 * Script include for global logic
 * ==========
 */
--}}

<script type="text/javascript">

// Start
$(document).ready(function() {

  // Generate a new Halle memory
  $('#generate').click(function(e) {

  });


  // Create a new Halle memory, starting with a picture
  $('#add-memory').click(function(e) {
    $('#upload_widget_opener').cloudinary_upload_widget(
      { cloud_name: 'esalling', 
        upload_preset: 'wtokgjnv', 
        cropping: 'server', 
        sources: [ 'local', 'url' ], 
        multiple: false
      }, function(error, result) { 

        if (!result[0])
          return;
          
        console.log(result[0]);

        // Do some stuff with the display
        $.post("/api/new/", { image: result[0] }, function(data){
          
          // Notify success
          $('.update-picture .save-msg').text('Nice! Saved.').fadeIn(function(){
            setTimeout(function(){
              $('.update-picture .save-msg').fadeOut();
            }, 2000)
          });

          // Do some stuff with the display
          $('.profile-picture').attr('src', result[0].url);
        }).error(function(err) {
            alert( "error" + err );
        });
    });
  });

  // Edit a Halle memory by adding captions, context, and more
  $('#edit').click(function(e) {

  });


}); 
// End

</script>